# 3人の座席について
|seat|status|
|:----|:----|
|1|占|
|2|占|
|3|空|
|4|空|
|5|空|
|6|占|
|7|空|
|8|空|
|9|空|
|10|空|
|11|空|
|12|占|
|13|占|
|14|空|
|15|空|

Q. 1~15の座席から3人で連続した席が予約できるかを求める  
※ {7,8,9}や{8,9,10}を区別すること  
- NOT EXISTS
``` sql
DECLARE @head_cnt INT = 3;
SELECT
	s1.seat AS 'start_seat'
	,'~'
	,s2.seat AS 'end_seat'
FROM
	Chapter10Seats AS s1
CROSS JOIN
	Chapter10Seats AS s2
WHERE
	s2.seat = s1.seat + (@head_cnt - 1)
AND
	NOT EXISTS(
		SELECT * FROM
			Chapter10Seats AS s3
		WHERE
			status = '占'
		AND
			s1.seat <= s3.seat
		AND
			s3.seat <= s2.seat)

-- result
start_seat	(列名なし)	end_seat
3	~	5
7	~	9
8	~	10
9	~	11
