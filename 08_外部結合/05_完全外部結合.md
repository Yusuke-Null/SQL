# 完全外部結合
外部結合には以下の3つがある
- LEFT (OUTER) JOIN(左外部結合)
- RIGTH (OUTER) JOIN(右外部結合)
- FULL (OUTER) JOIN(完全外部結合)

LEFTとRIGHTには機能的には差がなく、マスタとなるテーブルを左右どちらに書くかだけ  
完全外部結合とは、データ内容が不一致の2つのテーブルから情報を落とさずに結果を得る
| Class_A |       |   | Class_B |       |
|--------|--------|---|--------|--------|
| id     | name   |   | id     | name   |
| 1      | 田中   |   | 1      | 田中   |
| 2      | 鈴木   |   | 2      | 鈴木   |
| 3      | 伊集院 |   | 4      | 西園寺 |

EX) AとB計4名の情報を出力する
``` sql
SELECT
	COALESCE(a.id,b.id) AS id
	,a.name AS a_name
	,b.name AS b_name
FROM
	Chapter8Class_A AS a
FULL JOIN
	Chapter8Class_B AS b
ON
	a.id = b.id

-- result
id	a_name	b_name
1	田中	田中
2	鈴木	鈴木
3	伊集院	NULL
4	NULL	西園寺
```
aにはないid=3とbにはないid=4の結果も表示することができている  
左(右)外部結合ではマスタに使えるテーブルがどちらか一方のため  
id=3またはid=4の情報は欠落する  
-> 「完全」とは情報を完全に保存するという意味  
単純にLEFT JOINに書き換えると以下のようになる
``` SELECT
	COALESCE(a.id,b.id) AS id
	,a.name AS a_name
	,b.name AS b_name
FROM
	Chapter8Class_A AS a
LEFT JOIN
	Chapter8Class_B AS b
ON
	a.id = b.id

-- result
id	a_name	b_name
1	田中	田中
2	鈴木	鈴木
3	伊集院	NULL
```
左(右)外部結合で完全外部結合と同じ結果を得るには以下のようにする
``` sql
SELECT
	a.id AS id
	,a.name AS a_name
	,b.name AS b_name
FROM
	Chapter8Class_A AS a
LEFT JOIN
	Chapter8Class_B AS b
ON
	a.id = b.id
UNION
SELECT
	b.id AS id
	,a.name AS a_name
	,b.name AS b_name
FROM
	Chapter8Class_A AS a
RIGHT JOIN
	Chapter8Class_B AS b
ON
	a.id = b.id

-- result
id	a_name	b_name
1	田中	田中
2	鈴木	鈴木
3	伊集院	NULL
4	NULL	西園寺
```
左外部結合と右外部結合の結果をUNIONする  
-> 冗長に加え、結合2回 + UNIONしているためパフォーマンスが悪い  
