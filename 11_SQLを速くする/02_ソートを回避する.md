# ソートを回避する
SQLでは手続き型言語と違い、ユーザーが明示的にソートの演算をDBMSに命令することはない  
-> そういった手続きは極力ユーザーから隠蔽するのがSQLの設計しそうなため  
ただ、DBMS内部ではソートが暗黙的に行わているため、どの演算でソートが発生するかの意識が必要  

ソートが発生する代表的な演算は以下
- GROUP BY句
- ORDER BY句
- 集約関数(SUM, COUNT, AVG, MAX, MIN)
- DISTINCT
- 集合演算子(UNION, INTERSECT, EXCEPT)
- ウィンドウ関数(RANK, ROW_NUMBER etc...)

ソートがメモリ上で行わていればまだいいが、それでは足りずにストレージを使ったソートになると  
パフォーマンスが大きく低下するため、無駄ソートは極力回避する  
※ メモリとハードディスクは数十万~100万倍の性能差があると言われている(SSDを使えば性能改善がみられることもある)   

### 集合演算子のALLオプションを上手く使う
**SQLの集合演算子はUNION、INTERSECT、EXCEPTがあるが、普通に使うと重複削除のためのソートを行う**  
``` sql
-- UNION
SELECT * FROM Chapter8Class_A
UNION
SELECT * FROM Chapter8Class_B

-- result
id	name
1	田中
2	鈴木
3	伊集院
4	西園寺

-- UNION ALL
SELECT * FROM Chapter8Class_A
UNION ALL
SELECT * FROM Chapter8Class_B
-- result
id	name
1	田中
2	鈴木
3	伊集院
1	田中
2	鈴木
4	西園寺
```
UNION ALLは重複を削除しないため、ソートも発生しない(INTERSECTとEXCEPTでも同様)  
-> 重複を気にしなくてよい場合や重複が発生しないことが分かっている場合はALLオプションを使う
