# 重複行の削除
重複行はNULLと並んで良くない設計  
下記のようなテーブルでみかんを重複削除したい  
| name | price |
| :---: | :---: |
| りんご	 | 50 |
| みかん	 | 100 |
| バナナ	 | 80 |
| みかん	 | 100 |
| みかん	 | 100 |

OralceではレコードIDというどんなテーブルでも使える主キーである疑似列の機能がある  
-> SQL Serverにはない
``` sql
-- oracle
DELETE FROM Chapter3Products p1
WHERE rowid < (SELECT MAX(P2.rowid)
				 FROM
					Chapter3Products p2
				 WHERE
					p1.name = p2.name
				 AND
					p1.price = p2.price)
```
部分的不一致の検索  
DISTINCTがないと冗長な行が出力される
``` sql
SELECT
	DISTINCT p1.name
	,p1.price
FROM
	Chapter3Products p1
INNER JOIN
	Chapter3Products p2
ON
	p1.name <> p2.name
AND
	p1.price = p2.price
ORDER BY
	p1.price

-- result
name	price
ぶどう	50
りんご	50
いちご	100
バナナ	100
みかん	100
```
