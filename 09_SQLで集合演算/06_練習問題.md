# 練習問題
## 9-1
02_集合の相当性チェックで、UNIONだけを使う以下のクエリを使用した  
ただ、事前に行数を調べる必要があった  
Q. 事前に行数を調べることなく相当性チェックを行うように修正する
``` sql
SELECT COUNT(*) AS cnt FROM
(
	SELECT * FROM Chapter9Tbl_A
	UNION
	SELECT * FROM Chapter9Tbl_B
) AS tmp
```
2つのテーブルをUNIONした結果の行数が元の各テーブルと等しいかまでをクエリに組み込む  
-> 集約結果に対する条件設定が必要  
解答は以下だが、かなり強引できれいなやり方ではない
``` sql
SELECT
	CASE
		WHEN
			COUNT(*) = (SELECT COUNT(*) FROM Chapter9Tbl_A)
			AND
			COUNT(*) = (SELECT COUNT(*) FROM Chapter9Tbl_B)
		THEN '等しい'
		ELSE '異なる'
	END AS result
FROM
	(SELECT * FROM Chapter9Tbl_A
	 UNION
	 SELECT * FROM Chapter9Tbl_B) as tmp

-- result
result
等しい
```
## 9-2
03_差集合で関係除算を表現するで以下のクエリを使用した  
Q.厳密な除算をするように修正する
``` sql
SELECT DISTINCT e1.emp
FROM Chapter9EmpSkills e1
WHERE
	NOT EXISTS
	(SELECT skill FROM Chapter9Skills AS s
	 EXCEPT
	 SELECT skill FROM Chapter9EmpSkills AS e2
	 WHERE
		e1.emp = e2.emp)
```
