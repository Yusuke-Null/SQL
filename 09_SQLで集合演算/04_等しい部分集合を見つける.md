# 等しい部分集合を見つける
sup: 供給業者のキー  
part: 取り扱っている部品
|sup|part|
|:----|:----|
|A|ボルト|
|A|ナット|
|A|パイプ|
|B|ボルト|
|B|パイプ|
|C|ボルト|
|C|ナット|
|C|パイプ|
|D|ボルト|
|D|パイプ|
|E|ヒューズ|
|E|ナット|
|E|パイプ|
|F|ヒューズ|

EX) 数も種類もまったく同じ部品を取り扱う供給業者のペアを求める  
前章の関係除算と似ているが、比較対象の一方の集合は固定されていた(Skillsテーブル)  
だが、今回はどちらの集合も固定せずに部分集合同士の組み合わせ全てをテストする必要がある  
まずは業者の組み合わせを作ってみる  
``` sql
SELECT s1.sup, s2.sup
FROM
	Chapter9SupParts AS s1
CROSS JOIN
	Chapter9SupParts AS s2
WHERE
	s1.sup < s2.sup -- A,AやB,Bのパターンを除外する
GROUP BY
	s1.sup
	,s2.sup

-- result
sup	sup
A	B
A	C
A	D
A	E
A	F
B	C
B	D
B	E
B	F
C	D
C	E
C	F
D	E
D	F
E	F
```
次に業者のペアについて(A⊆B)かつ(A⊇B)⇒(A=B)の公式に当てはめる  
-> AがBに含まれていて、かつBがAに含まれているなら、AとBは同じ集合である
1. どちらの業者も同じ種類の部品を扱っている
2. 同数の商品を扱っている(全単射が存在する)
``` sql
SELECT s1.sup AS s1, s2.sup AS s2
FROM
	Chapter9SupParts AS s1
CROSS JOIN
	Chapter9SupParts AS s2
WHERE
	s1.sup < s2.sup  -- 業者の組み合わせを作る
AND
	s1.part = s2.part -- 条件1.同じ種類の部品を扱う
GROUP BY
	s1.sup
	,s2.sup
HAVING
-- 条件2. 同数の部品を扱う
	COUNT(*) = (
		SELECT COUNT(*) FROM Chapter9SupParts AS s3
		WHERE
			s1.sup = s3.sup)
AND
	COUNT(*) = (
		SELECT COUNT(*) FROM Chapter9SupParts AS s4
		WHERE
			s2.sup = s4.sup)

-- result
s1	s2
A	C
B	D
```
